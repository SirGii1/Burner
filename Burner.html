<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Wallet Burner ‚Äî Demo</title>
<style>
  :root{
    --bg:#0b0b0d;
    --fg:#ffffff;
    --red:#ff2b2b;
    --yellow:#ffd400;
    --accent:#ff8c00;
    --muted:#b5b5b5;
    --card:#151518;
    --ok:#32d296;
    --warn:#ffcc00;
    --err:#ff5252;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    background: radial-gradient(1200px 600px at 80% 0%, rgba(255,60,0,.08), transparent 60%),
                radial-gradient(900px 500px at 20% 0%, rgba(255,208,0,.06), transparent 60%),
                var(--bg);
    color:var(--fg);
    overflow-x:hidden;
  }

  /* Top bar */
  .topbar{
    position:sticky; top:0; z-index:50;
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 18px;
    background: linear-gradient( to bottom, rgba(0,0,0,.6), rgba(0,0,0,.2) ), #00000033;
    backdrop-filter: blur(6px);
    border-bottom: 1px solid #ffffff10;
  }
  .brand{
    display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.3px;
  }
  .logo{
    width:28px; height:28px; position:relative;
    filter: drop-shadow(0 0 10px rgba(255, 60, 0, .35));
  }
  /* Simple flame logo */
  .logo:before, .logo:after{
    content:""; position:absolute; left:50%; transform:translateX(-50%);
    width:18px; height:18px; border-radius:50% 50% 50% 0;
    background: radial-gradient(circle at 30% 30%, #fff 0%, #ffd400 30%, #ff2b2b 70%, #6b0000 100%);
    animation: flick 1.4s infinite ease-in-out alternate;
  }
  .logo:after{ width:12px; height:12px; top:6px; filter:brightness(1.3)}
  @keyframes flick{
    0% { transform: translateX(-50%) rotate(45deg) scale(0.95); }
    100%{ transform: translateX(-50%) rotate(46deg) scale(1.05); }
  }

  .connect-btn{
    appearance:none; border:none; cursor:pointer;
    background: linear-gradient(135deg, var(--red), var(--yellow));
    color:#000; font-weight:800; letter-spacing:.3px;
    padding:10px 14px; border-radius:10px; transition: transform .08s ease;
  }
  .connect-btn:active{ transform:translateY(1px) scale(0.99) }

  /* Hero */
  .hero{
    position:relative; padding:56px 18px 0; text-align:center; max-width:1100px; margin:0 auto;
  }
  .title{
    font-size: clamp(28px, 5vw, 48px); line-height:1.06; margin:10px auto 12px; font-weight:900;
    background: linear-gradient(180deg, #fff, #ffd400 30%, #ff6a00 60%, #ff2b2b);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow: 0 4px 40px rgba(255, 90, 0, .25);
  }
  .subtitle{
    color:var(--muted); max-width:750px; margin:0 auto 28px; font-size: clamp(14px, 2.3vw, 17px);
  }

  /* Fire ground animation */
  .fireband{
    position:relative; height:120px; overflow:visible; pointer-events:none; margin-top:10px;
  }
  .flame{
    position:absolute; bottom:-10px; width:18px; height:90px; border-radius:9px 9px 0 0;
    background: linear-gradient(180deg, #fff 0%, #ffd400 20%, #ff7a00 60%, #a30000 100%);
    opacity:.7; animation: rise 1.8s infinite ease-in-out;
    filter: blur(0.5px) drop-shadow(0 0 20px rgba(255,110,0,.3));
    transform-origin: bottom center;
  }
  @keyframes rise{
    0%{ transform: translateY(0) scaleX(0.9) rotate(-1deg); opacity:.8 }
    60%{ transform: translateY(-40px) scaleX(1.1) rotate(1deg); opacity:.95 }
    100%{ transform: translateY(-80px) scaleX(0.8) rotate(-1deg); opacity:0 }
  }

  /* Card */
  .card{
    max-width:950px; margin:0 auto; padding:18px;
  }
  .panel{
    background: linear-gradient(180deg, #17171b, #121215);
    border:1px solid #ffffff12; border-radius:16px; padding:20px;
    box-shadow: 0 8px 30px rgba(0,0,0,.45), inset 0 1px 0 #ffffff08;
  }

  .row{ display:grid; gap:14px; grid-template-columns:1fr; }
  @media (min-width: 860px){
    .row{ grid-template-columns: 1.15fr .85fr; }
  }

  label{ font-size:14px; color:#ddd; display:block; margin:0 0 6px 2px }
  input[type="text"]{
    width:100%; padding:12px 14px; border-radius:12px; background:#0f0f12; color:#fff;
    border:1px solid #ffffff22; outline:none; font-size:15px;
  }
  .btn{
    appearance:none; border:none; cursor:pointer;
    background: linear-gradient(135deg, #ff2b2b, #ffd400);
    color:#000; font-weight:900; letter-spacing:.4px;
    padding:12px 16px; border-radius:12px; transition: transform .08s ease, filter .2s ease;
  }
  .btn:disabled{ opacity:.6; cursor:not-allowed; filter:grayscale(0.2) }
  .btn:active{ transform:translateY(1px) scale(0.995) }

  .options{
    display:grid; gap:10px;
  }
  .opt{
    display:flex; gap:10px; align-items:flex-start;
    padding:12px; border-radius:12px; background:#0e0e11; border:1px solid #ffffff12;
  }
  .opt input{ margin-top:2px; transform: scale(1.1); }
  .opt strong{ color:#fff }
  .hint{ color:var(--muted); font-size:13px }
  .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace }

  .pill{
    display:inline-block; padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px; letter-spacing:.3px;
  }
  .pill.ok{ background:#133826; color:#9dffcd; border:1px solid #2c7a4b }
  .pill.warn{ background:#3a2f00; color:#ffe58a; border:1px solid #7a5f00 }
  .pill.err{ background:#3a0000; color:#ff9a9a; border:1px solid #7a0000 }

  .result{
    display:grid; gap:12px; grid-template-columns: repeat(3, minmax(0,1fr));
    margin-top:12px;
  }
  .stat{
    padding:12px; border-radius:12px; background:#0f0f12; border:1px solid #ffffff12;
  }
  .stat .k{ font-size:12px; color:#bbb; margin-bottom:4px }
  .stat .v{ font-size:18px; font-weight:800 }

  .footnote{ color:#9b9b9b; font-size:12px; margin-top:12px }
  .divider{ height:1px; background:linear-gradient(90deg, transparent, #ffffff20, transparent); margin:16px 0 }
</style>
</head>
<body>

  <!-- Top Bar -->
  <div class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div>Wallet Burner <span class="mono" style="color:var(--yellow)">/ demo</span></div>
    </div>
    <button class="connect-btn" id="connectBtn">Connect Wallet</button>
  </div>

  <!-- Hero -->
  <section class="hero">
    <h1 class="title">Burn Dead Tokens. Clean Pending Stuff. Keep It üî•</h1>
    <p class="subtitle">
      Transparent, demo-only interface. No secrets. No fake approvals. Your public address maps to a <strong>stable</strong> eligibility amount,
      and claim unlocks when you select at least one service below.
    </p>

    <!-- Decorative rising flames -->
    <div class="fireband" id="fireband"></div>
  </section>

  <!-- Main Card -->
  <section class="card">
    <div class="panel">
      <div class="row">
        <!-- Left: Inputs -->
        <div>
          <label for="wallet">Wallet to clean/burn (public address only)</label>
          <div style="display:flex; gap:8px">
            <input type="text" id="wallet" placeholder="Enter Solana address (public) ‚Äî e.g. 4cQ...xyz" />
            <button class="btn" id="checkBtn">Submit</button>
          </div>
          <div id="status" style="margin-top:10px"></div>

          <div class="divider"></div>

          <div class="options" aria-label="Service selection">
            <div class="opt">
              <input type="checkbox" id="optDead" />
              <div>
                <strong>Burn all dead tokens</strong>
                <div class="hint">Identify and burn dust/defunct SPL tokens you select.</div>
              </div>
            </div>
            <div class="opt">
              <input type="checkbox" id="optTxns" />
              <div>
                <strong>Close open transactions</strong>
                <div class="hint">Attempt to close stale pending accounts/tx contexts where safe.</div>
              </div>
            </div>
            <div class="opt">
              <input type="checkbox" id="optNFTs" />
              <div>
                <strong>Burn selected NFTs</strong>
                <div class="hint">You choose which NFTs to burn during execution (demo only).</div>
              </div>
            </div>
            <button class="btn" id="calcBtn" style="margin-top:4px">Calculate</button>
          </div>
          <div class="footnote">
            This demo runs entirely in your browser. It never asks for seed phrases or private keys. For production, use Solana Wallet Adapter and audited programs.
          </div>
        </div>

        <!-- Right: Results -->
        <div>
          <div class="result">
            <div class="stat">
              <div class="k">Eligibility</div>
              <div class="v" id="eligibility"><span class="pill warn">Awaiting wallet</span></div>
            </div>
            <div class="stat">
              <div class="k">Base amount (per wallet)</div>
              <div class="v" id="baseAmt">‚Äî</div>
            </div>
            <div class="stat">
              <div class="k">Claim (unlocks with services)</div>
              <div class="v" id="claimAmt">0 SOL</div>
            </div>
          </div>

          <div class="result" style="margin-top:10px">
            <div class="stat">
              <div class="k">Service fee (demo)</div>
              <div class="v" id="feeAmt">0 SOL</div>
            </div>
            <div class="stat">
              <div class="k">Net after fee</div>
              <div class="v" id="netAmt">0 SOL</div>
            </div>
            <div class="stat">
              <div class="k">History check</div>
              <div class="v" id="history"><span class="pill warn">‚Äî</span></div>
            </div>
          </div>

          <div class="footnote">
            <strong>Deterministic:</strong> the <em>base amount</em> is fixed for the same address (0.10‚Äì5.67 SOL).  
            <strong>New wallets:</strong> in this demo, addresses flagged as ‚Äúnew‚Äù are ineligible (history check fails).
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Connect Modal (simple, non-invasive) -->
  <dialog id="connectModal" style="border:none; border-radius:16px; padding:0; background:#121215; color:#fff; max-width:420px;">
    <div class="panel" style="border:none">
      <h3 style="margin:0 0 12px">Connect Wallet (demo)</h3>
      <p class="hint" style="margin-top:0">This demo only uses your <strong>public</strong> address. Never share private keys.</p>
      <label for="walletModal">Public address</label>
      <input type="text" id="walletModal" placeholder="Paste your Solana address" />
      <div style="display:flex; gap:8px; margin-top:12px; justify-content:flex-end">
        <button class="btn" id="connectNow">Use Address</button>
        <button class="btn" style="background:#222; color:#fff" id="closeModal">Close</button>
      </div>
    </div>
  </dialog>

<script>
  // --- Decorative fire columns
  const fireband = document.getElementById('fireband');
  for (let i=0;i<38;i++){
    const f=document.createElement('div');
    f.className='flame';
    const left = (i*100/38) + (Math.random()*2-1);
    f.style.left = left+'%';
    f.style.animationDelay = (Math.random()*1.5)+'s';
    f.style.height = (60 + Math.random()*60) + 'px';
    fireband.appendChild(f);
  }

  // --- Deterministic hashing (FNV-1a 32-bit)
  function hashStr(str){
    let h = 0x811c9dc5 >>> 0;
    for (let i=0; i<str.length; i++){
      h ^= str.charCodeAt(i);
      h = Math.imul(h, 0x01000193);
    }
    return h >>> 0;
  }

  // Map hash to 0.10‚Äì5.67 SOL inclusive-ish, stable per address.
  function baseAmountFor(addr){
    const h = hashStr(addr.trim());
    let amt = 0.10 + ((h % 5570) / 1000); // 0.10 .. 5.669
    if (amt > 5.67) amt = 5.67;
    return Number(amt.toFixed(3));
  }

  // Simulated "has history" check (replace with on-chain call in production)
  function hasHistory(addr){
    const h = hashStr(addr);
    // ~60% pass rate; tweak as you like
    return (h % 5) >= 2;
  }

  function fmt(n){ return (Number(n).toFixed(3) + ' SOL') }

  const els = {
    wallet: document.getElementById('wallet'),
    status: document.getElementById('status'),
    baseAmt: document.getElementById('baseAmt'),
    claimAmt: document.getElementById('claimAmt'),
    feeAmt: document.getElementById('feeAmt'),
    netAmt: document.getElementById('netAmt'),
    eligibility: document.getElementById('eligibility'),
    history: document.getElementById('history'),
    optDead: document.getElementById('optDead'),
    optTxns: document.getElementById('optTxns'),
    optNFTs: document.getElementById('optNFTs'),
    checkBtn: document.getElementById('checkBtn'),
    calcBtn: document.getElementById('calcBtn'),
    connectBtn: document.getElementById('connectBtn'),
    connectModal: document.getElementById('connectModal'),
    walletModal: document.getElementById('walletModal'),
    connectNow: document.getElementById('connectNow'),
    closeModal: document.getElementById('closeModal'),
  };

  function setStatus(text, state){
    let pillClass = 'pill warn';
    if (state==='ok') pillClass='pill ok';
    if (state==='err') pillClass='pill err';
    els.status.innerHTML = `<span class="${pillClass}">${text}</span>`;
  }

  function setEligibility(text, kind){ // kind: ok|warn|err
    let pillClass='pill warn';
    if (kind==='ok') pillClass='pill ok';
    if (kind==='err') pillClass='pill err';
    els.eligibility.innerHTML = `<span class="${pillClass}">${text}</span>`;
  }

  function setHistory(text, kind){
    let pillClass='pill warn';
    if (kind==='ok') pillClass='pill ok';
    if (kind==='err') pillClass='pill err';
    els.history.innerHTML = `<span class="${pillClass}">${text}</span>`;
  }

  async function fakeLoad(ms=1100){
    return new Promise(r=>setTimeout(r, ms));
  }

  async function handleSubmit(){
    const addr = (els.wallet.value||'').trim();
    if (!addr){
      setStatus('Enter a public address', 'err'); return;
    }
    setStatus('Checking wallet‚Ä¶', 'warn');
    els.baseAmt.textContent = '‚Äî';
    els.claimAmt.textContent = '0 SOL';
    els.feeAmt.textContent = '0 SOL';
    els.netAmt.textContent = '0 SOL';
    setEligibility('Loading‚Ä¶','warn');
    setHistory('‚Äî','warn');

    await fakeLoad(900 + Math.random()*600);

    // Basic address sanity (length 32‚Äì44 for Solana base58, very rough)
    if (addr.length < 32 || addr.length > 50){
      setStatus('Invalid-looking address (demo check)', 'err');
      setEligibility('Invalid address','err');
      return;
    }

    const history = hasHistory(addr);
    const base = baseAmountFor(addr);

    if (!history){
      setStatus('Wallet appears NEW ‚Äî ineligible in this demo', 'err');
      setEligibility('Ineligible (new wallet)','err');
      els.baseAmt.textContent = fmt(0);
      setHistory('No on-chain history (simulated)','err');
      return;
    }

    setStatus('Wallet is eligible (demo)', 'ok');
    setEligibility('Eligible','ok');
    setHistory('Has on-chain history (simulated)','ok');
    els.baseAmt.textContent = fmt(base);
  }

  function handleCalculate(){
    const addr = (els.wallet.value||'').trim();
    const history = hasHistory(addr);
    const baseText = els.baseAmt.textContent;
    const base = baseText.includes('SOL') ? parseFloat(baseText) : 0;

    const anySelected = els.optDead.checked || els.optTxns.checked || els.optNFTs.checked;

    // Service fee model (demo only)
    let fee = 0;
    if (els.optDead.checked) fee += 0.050;
    if (els.optTxns.checked) fee += 0.070;
    if (els.optNFTs.checked) fee += 0.030;
    fee = Number(fee.toFixed(3));

    // Claim unlock rule:
    // - Must have history AND at least one service selected.
    // - Claim itself is the deterministic base amount (fixed per wallet).
    let claim = 0;
    if (history && anySelected) claim = base;

    const net = Math.max(0, Number((claim - fee).toFixed(3)));

    els.feeAmt.textContent = fmt(fee);
    els.claimAmt.textContent = fmt(claim);
    els.netAmt.textContent = fmt(net);
  }

  // Connect modal (demo)
  els.connectBtn.addEventListener('click', ()=>{
    els.walletModal.value = (els.wallet.value||'');
    els.connectModal.showModal();
  });
  els.closeModal.addEventListener('click', ()=> els.connectModal.close());
  els.connectNow.addEventListener('click', ()=>{
    const addr = (els.walletModal.value||'').trim();
    if (addr){
      els.wallet.value = addr;
      setStatus('Address copied from Connect modal (demo)', 'ok');
    }
    els.connectModal.close();
  });

  els.checkBtn.addEventListener('click', handleSubmit);
  els.calcBtn.addEventListener('click', handleCalculate);

  // Keyboard helpers
  els.wallet.addEventListener('keydown', (e)=>{
    if (e.key==='Enter') handleSubmit();
  });
  els.walletModal.addEventListener('keydown', (e)=>{
    if (e.key==='Enter'){ e.preventDefault(); els.connectNow.click(); }
  });
</script>
</body>
</html>